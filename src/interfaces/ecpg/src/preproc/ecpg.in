#!/bin/sh

INFILE=
OUTFILE=

for arg
do
    case "$arg" in
    iname=*)
	INFILE=`expr substr $arg 7 1000`
	;;
    oname=*)
	OUTFILE=`expr substr $arg 7 1000`
	;;
    *)
	echo Wrong argument $arg
	exit 1;
	;;
    esac
done

if [ -n "$INFILE" -a -n "$OUTFILE" ]
then
    exec @POSTGRESERVER@/lib/ecpg/preproc < $INFILE > $OUTFILE
else
    echo Missing arguments.
    echo usage: $0 iname=file oname=outfile
    exit 1;
fi

exit 0;
