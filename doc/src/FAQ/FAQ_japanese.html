<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<TITLE>PostgreSQL FAQ in Japanese</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#FF0000" VLINK="#A00000" ALINK="#0000FF">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=x-euc-jp">
<H1>
PostgreSQL(ポストグレス・キュー・エル)についてよくある質問とその解答(FAQ)</H1>
<P>
原文最終更新日:		Tue Sep  9 18:42:51 EDT 2003</P>
<P>
現在の維持管理者:	Bruce Momjian (<A
HREF="mailto:pgman@candle.pha.pa.us">pgman@candle.pha.pa.us</A>)<BR>
Maintainer of Japanese Translation:	Jun Kuwamura (<A
HREF="mailto:juk at PostgreSQL.jp">juk at PostgreSQL.jp</A>)<BR><P>
<P>
この文書の最新版は
<A HREF="http://www.PostgreSQL.org/docs/faqs/FAQ.html">
http://www.PostgreSQL.org/docs/faqs/FAQ.html</A>
で見ることができます。
<P>

プラットホームに特有の質問については:
 <A HREF="http://www.PostgreSQL.org/docs/index.html">
 http://www.PostgreSQL.org/docs/index.html</A>
<BR>に回答があります。
<P>

<P>
<SMALL><PRE>
(以下、訳者による注釈を [訳注： と ] とで囲んで記します。)
[訳注：
	日本語版製作についてのメモは最後尾へ移動しました。

	日本語版のこの文書は <a HREF="http://www.PostgreSQL.org/docs/index.html">本家 "Docs" </a> の "Frequently Asked Questions" の
	ところに "Japanese FAQ" という見出であります。また、以下のサイトにも
	あります。
		<A HREF="http://www.PostgreSQL.jp/subcommittee/jpugdoc/">http://www.PostgreSQL.jp/subcommittee/jpugdoc/</A>
		<A HREF="http://www.rccm.co.jp/~juk/pgsql/">http://www.rccm.co.jp/~juk/pgsql/</A>
		<A HREF="http://www.linux.or.jp/JF/">http://www.linux.or.jp/JF/</A>

	この和訳についてお気づきの点は(<A HREF="mailto:juk at PostgreSQL.jp">juk at PostgreSQL.jp</A>)までメールでお寄せ下さい。

						2003年09月20日    桑村 潤
]
</PRE></SMALL>

<P>
<HR>
<P>

<H2 align="center">一般的な質問</H2>

<A HREF="#1.1">1.1</A>)	PostgreSQLとは何ですか？  何と読みますか？<BR>
<A HREF="#1.2">1.2</A>)	PostgreSQLの著作権はどうなってますか？<BR>
<A HREF="#1.3">1.3</A>)	PostgreSQLの動作するUnixプラットホームは？<BR>
<A HREF="#1.4">1.4</A>)	Unix以外の移植版で使えるものは？<BR>
<A HREF="#1.5">1.5</A>)	PostgreSQLはどこから入手できますか？<BR>
<A HREF="#1.6">1.6</A>)	サポートはどこで受けられますか？<BR>
<A HREF="#1.7">1.7</A>)	最新版はどれですか<BR>
<A HREF="#1.8">1.8</A>)	どのような文書がありますか？<BR>
<A HREF="#1.9">1.9</A>)	既知のバグや未だ無い機能はどうやって見つけますか？<BR>
<A HREF="#1.10">1.10</A>)	<SMALL>SQL</SMALL>はどうすれば学べますか？<BR>
<A HREF="#1.11">1.11</A>)	PostgreSQLは西暦2000年問題(Y2K)に対応していますか？<BR>
<A HREF="#1.12">1.12</A>)	開発チームにはどのように参加しますか？<BR>
<A HREF="#1.13">1.13</A>)	バグレポートはどのように発信しますか？<BR>
<A HREF="#1.14">1.14</A>)	他の<SMALL>DBMS</SMALL>のと比べてPostgreSQLはどうなのですか？<BR>
<A HREF="#1.15">1.15</A>)	PostgreSQLを資金面で援助するにはどうすればよいですか？<BR>


<H2 align="center">ユーザー・クライアントの質問</H2>

<A HREF="#2.1">2.1</A>)	PostgreSQL の <SMALL>ODBC</SMALL> ドライバーはありますか？<BR>
<A HREF="#2.2">2.2</A>)	PostgreSQL を Web ページと連携させるにはどんなツールがありますか？<BR>
<A HREF="#2.3">2.3</A>)	PostgreSQL にグラフィカル・ユーザインターフェイスはありますか？<BR>
<A HREF="#2.4">2.4</A>)	どのような言語で PostgreSQL と通信できすか？<BR>


<H2 align="center">管理上の質問</H2>

<A HREF="#3.1">3.1</A>)	どのようにすれば <I>/usr/local/pgsql</I> 以外の場所にインストールできますか？<BR>
<A HREF="#3.2">3.2</A>)	postmaster を走らせると、
<I>Bad System Call</I> とかコア・ダンプしたとのメッセージが出ます。なぜですか？<BR>
<A HREF="#3.3">3.3</A>)	<I>postmaster</I> を走らせようとすると、
<I>IpcMemoryCreate</I> エラーが出ます。なぜですか？<BR>
<A HREF="#3.4">3.4</A>)	<I>postmasterを</I>走らせようとすると、
<I>IpcSemaphoreCreate</I> エラーが出ます。なぜですか？<BR>
<A HREF="#3.5">3.5</A>)	他のホストからの接続はどのように制御しますか？<BR>
<A HREF="#3.6">3.6</A>)	より良い性能を得るためには、データベース・エンジンをどのように調整すれば良いですか？<BR>
<A HREF="#3.7">3.7</A>)	どのようなデバグ機能が使えますか？<BR>
<A HREF="#3.8">3.8</A>)	接続しようとするときに <I>'Sorry, too many clients'</I> が出るのはなぜですか？<BR>
<A HREF="#3.9">3.9</A>)	<I>pgsql_tmp</I> ディレクトリの中には何がありますか？<BR>
<A href="#3.10">3.10</A>) PostgreSQLのメジャーリリースをアップデートするのにダンプとリストアをしなくてはならないのはなぜですか？<br>



<H2 align="center">操作上の質問</H2>

<A HREF="#4.1">4.1</A>)	バイナリ・カーソルと通常カーソルとの違いは何ですか？<BR>
<A HREF="#4.2">4.2</A>)	最初の数ロウのみを <SMALL>select</SMALL> するにはどうしますか？ ランダムな行？ <BR>
<A HREF="#4.3">4.3</A>)	テーブルやその他の情報のリストを <I>psql</I> で見るにはどうしますか？<BR>
<A HREF="#4.4">4.4</A>)	テーブルからカラムの削除、あるいは、データ型を変更するにはどうしますか？<BR>
<A HREF="#4.5">4.5</A>)	ロウ、テーブル、データベースの最大サイズは？<BR>
<A HREF="#4.6">4.6</A>)	一般的なテキストファイルからデータを保存するには、データベースのディスク容量はどのくらい必要ですか？<BR>
<A HREF="#4.7">4.7</A>)	定義されたテーブル、インデックス、データベース、および、ユーザをどのようにして見つけ出しますか？<BR>
<A HREF="#4.8">4.8</A>)	問い合わせが遅いうえ、インデックスを使っている様子がありません。なぜですか？<BR>
<A HREF="#4.9">4.9</A>)	問い合わせオブティマイザがどのように問い合わせを評価するかを見るにはどうしますか？<BR>
<A HREF="#4.10">4.10</A>) R-tree インデックスとは何ですか？<BR>
<A HREF="#4.11">4.11</A>) 遺伝的問い合わせ最適化とは何ですか？<BR>
<A HREF="#4.12">4.12</A>) 正規表現での検索や大文字と小文字とを区別しない正規表現検索はどのように実現しますか？大文字と小文字とを区別しない検索のためのインデックスはどのように使いますか？<BR>
<A HREF="#4.13">4.13</A>) 問い合わせの中で、フィールドが <SMALL>NULL</SMALL> であることを検出するにはどうしますか？<BR>
<A HREF="#4.14">4.14</A>) 色々な文字型のそれぞれの違いは何ですか？<BR>
<A HREF="#4.15.1">4.15.1</A>) 通番(serial)／自動増分フィールドはどのようにつくりますか？<BR>
<A HREF="#4.15.2">4.15.2</A>) <SMALL>SERIAL</SMALL>データ型に挿入される値は、どうすれば得られますか？<BR>
<A HREF="#4.15.3">4.15.3</A>) 他のユーザとの競合状態を避けるためには、<I>currval()</I> と <I>nextval()</I> は使わないほうがよいのでしょうか？<BR>
<A HREF="#4.15.4">4.15.4</A>) トランザクションが中断したときにもういちどシーケンス番号が使われないのはなぜですか？シーケンス／SERIALカラムに空きがあるのはなぜですか？<BR>
<A HREF="#4.15">4.16</A>) <SMALL>OID</SMALL> とは何ですか？ <SMALL>TID</SMALL> とは何ですか？<BR>
<A HREF="#4.17">4.17</A>) PostgreSQL で使われるいくつかの用語の意味は何ですか？<BR>
<A HREF="#4.18">4.18</A>) エラーメッセージ <I>"ERROR: Memory exhausted in AllocSetAlloc()"</I>が出るのはなぜですか？<BR>
<A HREF="#4.19">4.19</A>) どのバージョンの PostgreSQL を走らせているのかを調べるにはどうしますか？<BR>
<A HREF="#4.20">4.20</A>) ラージオブジェクトの操作で、<I>invalid large obj descriptor</I>と出るのはなぜですか？<BR>
<A HREF="#4.21">4.21</A>) 現在の時刻がデフォルトとなるようなカラムはどのようにつくりますか？<BR>
<A HREF="#4.22">4.22</A>) なぜ、<SMALL>IN</SMALL>を使う副問い合わせがとても遅いのですか？<BR>
<A HREF="#4.23">4.23</A>) <i>外部</i>結合(<i>outer</i> join)はどのように実現しますか?<BR>
<A HREF="#4.24">4.24</A>) 複数のデータベースを使う問い合わせはどのようにすればできますか？<br>
<A HREF="#4.25">4.25</A>) 関数で複数のロウまたはカラムを返すにはどうしますか？<br>
<A HREF="#4.26">4.26</A>) なぜ、PL/PgSQL 関数の中から一時テーブルを確実に create/drop することができないのでしょうか？<br>
<A href="#4.27">4.27</A>) どのようなリプリケーションオプションを利用できますか?<BR>
<A href="#4.28">4.28</A>) どのような暗号化オプションを利用できますか?<BR>

<H2 align="center">PostgreSQLの拡張についての質問</H2>

<A HREF="#5.1">5.1</A>)	自分で書いたユーザ定義関数を psql の中で実行するとコア・ダンプしてしまうのはなぜですか？<BR>
<A HREF="#5.2">5.2</A>)	PostgreSQL 用に書いたちょっと素敵な新しい型や関数を提供してプロジェクトに貢献したいのですが？<BR>
<A HREF="#5.3">5.3</A>)	タプルを返す C言語の関数はどのように書きますか？<BR>
<A HREF="#5.4">5.4</A>)	ソース・ファイルを変更しました。再コンパイルしても変化が見られないのはなぜですか？<BR>
<P>
<HR>
<H2 align="center">一般的な質問</H2>
<P>

<H4><A NAME="1.1">1.1</A>)	PostgreSQL とは何ですか？  何と読みますか？</H4>

<P><I>Post-Gres-Q-L.</I>(ポスト - グレス - キュー - エル) と発音します。</P>
<P>PostgreSQL は次世代 <SMALL>DBMS</SMALL> 研究用のプロトタイプであった POSTGRES データベース管理システムの改良版です。PostgreSQL は POSTGRES の強力なデータ・モデルと豊富なデータ・タイプ(型)を保持しながら、POSTGRES で使われた PostQuel 問い合わせ言語を、拡張した <SMALL>SQL</SMALL> のサブセットに置き換えています。PostgreSQL は無料で完全なソースを利用できます。

<P>PostgreSQL の開発は、PostgreSQL 開発メーリングリストに参加している開発者達のチームですべて行なわれています。現在の座長は Marc G. Fournier (<A HREF="mailto:scrappy@PostgreSQL.org">scrappy@PostgreSQL.org</A> )です。(下記の<a href="#1.6">1.6節</a>に参加の仕方があります。)現在、このチームが PostgreSQL 開発のすべての面倒をみています。

<P>Postgres95-1.01 の中心的な開発者は Andrew Yu と Jolly Chen でしたが、その他大勢の人々がこのコードの移植、テスト、デバグ、および、改良に参加しました。PostgreSQL の派生元コードである POSTGRES はカリフォルニア大学バークレイ校において、 Michael Stonebraker 教授の指揮のもと、多くの学生、卒業生、本職のプログラマたちの努力により作られました。

<P>バークレイにおけるこのソフトウェアのもとの名前は Postgres でしたが、<SMALL>SQL</SMALL> の機能が追加された 1995 年にその名前は Postgres95 に変更され、1996 年の終りにその名前は PostgreSQL に変更されました。

<P>
<H4><A NAME="1.2">1.2</A>)	PostgreSQL の著作権はどうなってますか？</H4>

<P> PostgreSQL は下記の著作権に従います。
<SMALL><PRE>
    [訳注：
        正文は英語です。参考として、訳文を併記掲載します。
    ]
</PRE></SMALL>
<P>
PostgreSQL Data Base Management System</P>
<P>
Portions Copyright (c) 1996-2002, PostgreSQL Global Development Group
Portions Copyright (c) 1994-6 Regents of the University of California</P>
<P>
Permission to use, copy, modify, and distribute this software and its
documentation for any purpose, without fee, and without a written
agreement is hereby granted, provided that the above copyright notice
and this paragraph and the following two paragraphs appear in all
copies.</P>
<P>
IN NO EVENT SHALL THE UNIVERSITY OF CALIFORNIA BE LIABLE TO ANY PARTY
FOR DIRECT, INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES,
INCLUDING LOST PROFITS, ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS
DOCUMENTATION, EVEN IF THE UNIVERSITY OF CALIFORNIA HAS BEEN ADVISED OF
THE POSSIBILITY OF SUCH DAMAGE.</P>
<P>
THE UNIVERSITY OF CALIFORNIA SPECIFICALLY DISCLAIMS ANY WARRANTIES,
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS FOR A PARTICULAR PURPOSE.  THE SOFTWARE PROVIDED HEREUNDER
IS ON AN "AS IS" BASIS, AND THE UNIVERSITY OF CALIFORNIA HAS NO
OBLIGATIONS TO PROVIDE MAINTENANCE, SUPPORT, UPDATES, ENHANCEMENTS, OR
MODIFICATIONS.</P>

<SMALL><PRE>
	POSTGRESQL データベース管理システム

	部分的著作権 (c) 1996-2002, PostgreSQL国際開発チーム
	部分的著作権 (c) 1994-6 カリフォルニア大学本校


	  本ソフトウェアおよびその文書一式は上記の著作権表示と、この文章
	およびこれに続く二つの段落が全ての複製に添付されている限りにおい
	て、使用、複製、修正および配付の許可を、いかなる目的であっも、無
	償でかつ同意書無しに行なえることをここに認めます。
	
	  カリフォルニア大学は、いかなる当事者にたいしても、利益の壊失を
	含む、直接的、間接的、特別、偶然あるいは必然的にかかわらず生じた
	損害について、たとえカリフォルニア大学がこれらの損害について訴追
	を受けていたとしても、一切の責任を負いません。
	
	  カリフォルニア大学は、商用目的における暗黙の保証と、特定目的で
	の適合性に関してはもとより、これらに限らず、いかなる保証も放棄す
	ることを明言します。以下に用意されたソフトウェアは「そのまま」を
	基本原理とし、カリフォルニア大学はそれを維持、支援、更新、改良あ
	るいは修正する義務を負いません。

    [訳注：
	著作権に関する正文は上記の英語による表記です。日本語訳はあくまで
	参考です。
    ]
</PRE></SMALL>

<P>上記はBSDライセンスで古きオープンソースのライセンスです。ソースコード
がどのように使われようとも制限しません。好ましいことなので、我々もそれを
変えるつもりはありません。</P>

<H4><A NAME="1.3">1.3</A>)	PostgreSQL の動作環境は？</H4>

<P>
一般的に、最近のUnix互換プラットホームならばPostgreSQLをはしらせられるはずです。リリースの時点で実際にテストを行なったことの報告がなされたプラットホームについてはインストール手引書に列挙してあります。</P>

<P>
<H4><A NAME="1.4">1.4</A>)	Unix以外の移植版で使えるものは？</H4>

<P><STRONG>クライアント</STRONG></P>

<P> MS Windows プラットホーム上で走せるために、<I>libpq</I> C ライブラリ、psql、その他のインターフェイス、および、クライアントアプリケーションをコンパイルすることは可能です。この場合、クライアントを MS Windows 上で走らせて、TCP/IP 経由でサポートされている Unix プラットホーム上で走るサーバと通信します。</P>
<P> Win32 <I>libpq</I> ライブラリと psql を作るために、<I>win32.mak</I> が配布に含まれてます。PostgreSQLは <SMALL>ODBC</SMALL> クライアントとも通信できます。</P>

<P><STRONG>サーバ</STRONG></P>
<P> 現在、Cygnus Unix/NT 移植ライブラリの Cygwin を使って、PostgreSQL データベースサーバは Windows NT と Win2k 上で稼働しています。配布に含まれる<I>pgsql/doc/FAQ_MSWIN</I>、あるいは、
<A href="http://www.PostgreSQL.org/docs/faqs/text/FAQ_MSWIN">http://www.PostgreSQL.org/docs/faqs/text/FAQ_MSWIN</A>にある MS Windows FAQ をご覧下さい。</P>
<P>MS Win NT/2000/XP ネイティブ版への移植が現在進行中です。もっと詳しいWindows版PostgreSQLの近況は、<a href="http://techdocs.postgresql.org/guides/Windows">http://techdocs.postgresql.org/guides/Windows</a>と
<a href="http://momjian.postgresql.org/main/writings/pgsql/win32.html">
http://momjian.postgresql.org/main/writings/pgsql/win32.html</a>
を見てください。
</p>

<BR>
[訳注：
<BR>
<h6><FONT COLOR="orange">
Win32ネイティーブ版(Win32 Native version)
</FONT></H6>
<PRE>
	  Windows-Native サーバー & クライアントパッケージが斉藤さんにより
	維持管理されています。
	    <A href="http://hp.vector.co.jp/authors/VA023283/PostgreSQL.html">http://hp.vector.co.jp/authors/VA023283/PostgreSQL.html</A>
	(Windows-Native Server&Client Package for PostgreSQL by Hiroshi Saito)
	    <A href="http://hp.vector.co.jp/authors/VA023283/PostgreSQLe.html">http://hp.vector.co.jp/authors/VA023283/PostgreSQLe.html</A>

</PRE>
<BR>
]
<BR>


<H4><A NAME="1.5">1.5</A>)	PostgreSQL はどこから入手できますか？</H4>

<P> PostgreSQL の大元の anonymous ftp サイトは
<A
href="ftp://ftp.PostgreSQL.org/pub/">ftp://ftp.PostgreSQL.org/pub/</A>
です。
ミラーサイトについては、我々のメイン Web ページをご覧下さい。</P>

<SMALL><PRE>
    [訳注:

	以下は日本のミラーサイトです:

       Japan: <A HREF="ftp://mirror.nucba.ac.jp/mirror/PostgreSQL/pub/">ftp://mirror.nucba.ac.jp/mirror/PostgreSQL/pub/</A>
       Japan: <A HREF="ftp://ring.ip-kyoto.ad.jp/pub/misc/db/PostgreSQL/">ftp://ring.ip-kyoto.ad.jp/pub/misc/db/PostgreSQL/</A>
       Japan: <A HREF="ftp://ring.crl.go.jp/pub/misc/db/PostgreSQL/">ftp://ring.crl.go.jp/pub/misc/db/PostgreSQL/</A>
       Japan: <A HREF="ftp://ring.saitama-u.ac.jp/pub/misc/db/PostgreSQL/">ftp://ring.saitama-u.ac.jp/pub/misc/db/PostgreSQL/</A>
       Japan: <A HREF="ftp://ring.astem.or.jp/pub/misc/db/PostgreSQL/">ftp://ring.astem.or.jp/pub/misc/db/PostgreSQL/</A>
       Japan: <A HREF="ftp://ring.exp.fujixerox.co.jp/pub/misc/db/PostgreSQL/">ftp://ring.exp.fujixerox.co.jp/pub/misc/db/PostgreSQL/</A>
       Japan: <A HREF="ftp://ring.jah.ne.jp/pub/misc/db/PostgreSQL/">ftp://ring.jah.ne.jp/pub/misc/db/PostgreSQL/</A>
       Japan: <A HREF="ftp://ring.etl.go.jp.jp/pub/misc/db/PostgreSQL/">ftp://ring.etl.go.jp.jp/pub/misc/db/PostgreSQL/</A>
       Japan: <A HREF="ftp://ring.asahi-net.or.jp/pub/misc/db/PostgreSQL/">ftp://ring.asahi-net.or.jp/pub/misc/db/PostgreSQL/</A>
       Japan: <A HREF="ftp://ring.so-net.ne.jp/pub/misc/db/PostgreSQL/">ftp://ring.so-net.ne.jp/pub/misc/db/PostgreSQL/</A>
       Japan: <A HREF="ftp://ring.aist.go.jp/pub/misc/db/PostgreSQL/">ftp://ring.aist.go.jp/pub/misc/db/PostgreSQL/</A>
    ]
</PRE></SMALL>

<H4><A NAME="1.6">1.6</A>)	サポートはどこで受けられますか？</H4>

<P>主要なメーリング・リストは: <A HREF="mailto:pgsql-general@PostgreSQL.org">pgsql-general@PostgreSQL.org</A>です。PostgreSQL に関することであれば議論ができます。このリストへの参加のは、電子メールの本文(Subject 行ではありません)に次の２行を書いて、</P>
<PRE>
	subscribe
	end
</PRE>

<P> <A HREF="mailto:pgsql-general-request@PostgreSQL.org">pgsql-general-request@PostgreSQL.org</A> へ送って下さい。</P>

<P> ダイジェスト版のメーリング・リストもあります。このリストへの参加は "本文"に：</P>
<PRE>
	subscribe
	end
</PRE>

と書いて <A HREF="mailto:pgsql-general-digest-request@PostgreSQL.org"> pgsql-general-digest-request@PostgreSQL.org</A> へ電子メールを送って下さい。</P>

<P> ダイジェスト版は、メインリストで受信するメッセージが 30k 程度溜る毎にダイジェスト版リストのメンバーに送付されます。</P>

<P> バグレポート用のメーリングリストもあります。このリストへの参加は "本文"といっしょに：
<A
HREF="mailto:bugs-request@PostgreSQL.org">bugs-request@PostgreSQL.org</A>

へ電子メールを送って下さい。</P>

<P> 開発者の議論のためのメーリングリストも利用できます。このリストへの参加は電子メールの本文に：
<PRE>
	subscribe
	end
</PRE>

と書いて、<A HREF="mailto:pgsql-hackers-request@PostgreSQL.org">pgsql-hackers-request@PostgreSQL.org</A>へ電子メールを送って下さい。</P>

<P PostgreSQL についてもっと詳しく知りたければ、次の PostgreSQL WWWホームページからたどれます：
<BLOCKQUOTE>
		<A HREF="http://www.PostgreSQL.org">http://www.PostgreSQL.org</A>
</BLOCKQUOTE>
</P>
<P>EFNet と OpenProjects に <I>#PostgreSQL</I> という IRC チャンネルもあります。
UNIX コマンドで<tt>irc -c '#PostgreSQL' "$USER" <A HREF="http://irc.phoenix.net">irc.phoenix.net</A> を使っています。</P>
<P>
<SMALL><PRE>
    [訳注:
	  1999年7月23日、日本PostgreSQLユーザー会(にほん ぽすとぐれす ゆーざー かい)、略称JPUG
	が設立されました。JPUG は非営利組織で、PostgreSQLを利用する人達の相互協力の場となっています。  
	2003年5月17日の総会を以って、「日本PostgreSQLユーザ会」に名称を改めました。
	正会員の会費は無料ですが、協賛会員の会費と会員の積極的な貢献が会の運営を助けています。
	詳しくは、JPUG のWeb サイト:
		<A HREF="http://www.PostgreSQL.jp/">http://www.PostgreSQL.jp/</A>
	をご覧ください。会員登録も可能となっています。
	  1990年代中ごろより、ポストグレスの日本語メーリング・リストを石井 達夫さんが主催しています。詳細は、
		<A HREF="http://www.sra.co.jp/people/t-ishii/PostgreSQL/ML/info.html">http://www.sra.co.jp/people/t-ishii/PostgreSQL/ML/info.html</A>
	をご覧下さい。アーカイブを、いわきりさんのpgsql-jp ML検索システム
		<A HREF="http://datula.mio.org/~iwakiri/pgsql_jp/">http://datula.mio.org/~iwakiri/pgsql_jp/</A>
	で検索することもできます。
	]
</PRE></SMALL>


<P>商用サポート会社のリストは<a href="http://techdocs.postgresql.org/companies.php">http://techdocs.postgresql.org/companies.php</a>にあります。</P>
<P>
<SMALL><PRE>
    [訳注:
	 日本では、<A HREF="http://osb.sra.co.jp/">SRA Inc. オープンシステム事業部</A> にて商用サポートが行なわれています。
	<A HREF="http://www.miraclelinux.co.jp/">ミラクル・リナックス株式会社</A> で "Miracle Linux for PostgreSQL" の販売とサポートが
	開始されました。
    ]
</PRE></SMALL>
</P>

<H4><A NAME="1.7">1.7</A>)	最新版はどれですか</H4>
<P>
PostgreSQL の最新版はバージョン 7.3.4 です。</P>
<P>
我々は、6〜8カ月毎にメジャーリリースを行なうことを計画しています。</P>


<H4><A NAME="1.8">1.8</A>)	どのような文書がありますか？</H4>

<P> 配付の中に、いくつかのマニュアルとオンライン・マニュアル(マニュアル・ページ)およびいくつかの小さなテスト例題が含まれます。<I>/doc</I> ディレクトリをご覧下さい。また、マニュアルは、<A HREF="http://www.ca.PostgreSQL.org/docs/">http://www.ca.PostgreSQL.org/docs/</A>でオンラインでも閲覧できます。</P>

<SMALL><PRE>
    [訳注:
	（株）SRAと日本PostgreSQLユーザ会で翻訳され、
	<A HREF="http://osb.sra.co.jp/PostgreSQL/Manual/">「PostgreSQL オフィシャルマニュアル」</A>
	として出版されています。
    ]
</PRE></SMALL>


<P>オンラインで参照できる PostgreSQL の本も2冊あります。<A href=
    "http://www.PostgreSQL.org/docs/awbook.html">http://www.PostgreSQL.org/docs/awbook.html</A>
<SMALL><PRE>
    [訳注:
	日本ポストグレスユーザー会の<A HREF="http://www.PostgreSQL.jp/subcommittee/psqltrans/">	「PostgreSQL Book翻訳分科会」</A>
	にて翻訳されました。
    ]
</PRE></SMALL>

    および、 <A href=
    "http://www.commandprompt.com/ppbook/">http://www.commandprompt.com/ppbook/</A>
です。
  
    購入可能な書籍の目録は、<A href=
    "http://techdocs.postgresql.org/techdocs/bookreviews.php">http://techdocs.PostgreSQL.org/techdocs/bookreviews.php</A>
    にあります。

    PostgreSQL 技術情報記事も、<A href=
    "http://techdocs.PostgreSQL.org/">http://techdocs.PostgreSQL.org/</A>
    にあります。</P>
<P>
    [訳注:
	和訳文書は、日本ポストグレスユーザー会の<A
	HREF="http://www.postgresql.jp/document/">http://www.postgresql.jp/document/</A>
	をごらん下さい。
    ]
</P>

<P> <I>psql</I> も、型、演算子、関数、集約、その他の情報をお見せする、いくつかの素晴らしい \d コマンドを持ちます。</P>

<P> 我々の Web サイトには、もっと沢山の文書があります。</P>


<H4><A NAME="1.9">1.9</A>)	既知のバグや未だ無い機能はどうやって見つけますか？
</H4>
<P>
PostgreSQLは拡張された<SMALL>SQL</SMALL>-92のサブセットをサポートします。
我々のページの
<A HREF="http://www.PostgreSQL.org/docs/todo.html">TODO</A>
リストに、既知のバグや欠落機能や将来計画についての記述があります。</P>

<H3><A NAME="1.10">1.10</A>)	<SMALL>SQL</SMALL> はどうすれば学べますか？</H3>
<P>
<A HREF="http://www.PostgreSQL.org/docs/awbook.html">
http://www.PostgreSQL.org/docs/awbook.html</A>
にあるPostgreSQL本で <SMALL>SQL</SMALL> を教えています。

<SMALL><PRE>
    [訳注:
	日本ポストグレスユーザー会の<A HREF="http://www.PostgreSQL.jp/subcommittee/psqltrans/">	「PostgreSQL Book翻訳分科会」</A>
	にて翻訳され出版されています。
    ]
</PRE></SMALL>
</P>

<P>
その他にも PostgreSQL本として、<A href=
    "http://www.commandprompt.com/ppbook/">http://www.commandprompt.com/ppbook</A>
があります。

素晴らしい手引書は、<A href=
    "http://www.intermedia.net/support/sql/sqltut.shtm">http://www.intermedia.net/support/sql/sqltut.shtm,</A>
    <A href=
    "http://ourworld.compuserve.com/homepages/graeme_birchall/HTM_COOK.HTM">
    http://ourworld.compuserve.com/homepages/graeme_birchall/HTM_COOK.HTM,</A>
    そして、<A href=
    "http://sqlcourse.com/">http://sqlcourse.com</A>
にあります。</P>

    <P>その他では、 "Teach Yourself SQL in 21 Days, Second Edition" が <A href=
    "http://members.tripod.com/er4ebus/sql/index.htm">http://members.tripod.com/er4ebus/sql/index.htm</A>にあります。</P>

<P>
多くのユーザに、
<I>The Practical SQL Handbook</I>, Bowman Judith S. et al., Addison-Wesley
が好評です。
その他に、<I>The Complete Reference SQL</I>, Groff et al., McGraw-Hill 
のようなのもあります。
</P>

<P>
<SMALL><PRE>
    [訳注:
	 石井達夫氏による日本語の参考文献の紹介ページ
		<A HREF="http://www.SRA.co.jp/people/t-ishii/PostgreSQL/doc-jp/index.html">http://www.SRA.co.jp/people/t-ishii/PostgreSQL/doc-jp/index.html</A>
	があります。
	 近藤直文氏の「初心者向のＤＢ設計入門・ＳＱＬ入門参考書紹介」のコーナー
		<A HREF="http://www.shonan.ne.jp/~nkon/ipsql/books_SQL.html">http://www.shonan.ne.jp/~nkon/ipsql/books_SQL.html</A>
	があります。
	 堀田倫英氏の「PostgreSQL日本語マニュアル」
		<A HREF="http://www.net-newbie.com/">http://www.net-newbie.com/</A>
	ではオンラインマニュアルの検索ができます。
	 丸山不二夫氏のUNIX データベース入門
		<A HREF="http://www.wakhok.ac.jp/DB/DB.html">http://www.wakhok.ac.jp/DB/DB.html</A>
	もオンラインで読むことができます。
    ]
</PRE></SMALL>
</P>

<H4><A NAME="1.11">1.11</A>)	PostgreSQLは西暦2000年問題(Y2K)に対応していますか？
</H4>
<P>
対応してます。西暦2000年より後の日付も、紀元前2000年より前の日付も、簡単に扱えます。</P>

<H4><A NAME="1.12">1.12</A>)	開発チームにはどのように参加しますか？<BR>
</H4>
<P>
まず最初(１番目)に、最新のソースをダウンロードし、我々の Web サイトか配布に含まれているPostgreSQL Developersの文書を読みます。
２番目に、<I>pgsql-hackers</I> と <I>pgsql-patches</I> メーリング・リストを購読(subscribe)します。
３番目に、高品質のパッチをpgsql-patchesに発信します。</P>
<P>
およそ十人ちょっとの人達が、PostgreSQL <SMALL>CVS</SMALL>アーカイブにコミットする権限を持っています。
そのそれぞれの人達が沢山の高品質なパッチを発信するので、現在コミッターとなっている人達はそれに追い付くのが大変ですが、我々は彼らがコミットしたパッチは高品質であると確信しています。</P>

<H4><A NAME="1.13">1.13</A>)	バグレポートはどのように発信しますか？
</H4>

<P><A
href="http://www.PostgreSQL.org/bugs/bugs.php">http://www.PostgreSQL.org/bugs/bugs.php</A>PostgreSQL BugTool (バグツール)のページを訪れてみて下さい。 バグレポートを提出する仕方についての手引と指針があります。</P>

<P> その前に <A HREF="http://PostgreSQL.org">http://PostgreSQL.org</A>にある最新の FAQ をチェックして下さい。</P>

<P> それと同時に ftp サイト <A HREF="ftp://ftp.PostgreSQL.org/pub/">ftp://ftp.PostgreSQL.org/pub/</A>で、もっと新しいバージョンの PostgreSQL あるいはパッチをさがしてみて下さい。</P>

<H4><A NAME="1.14">1.14</A>)	他の<SMALL>DBMS</SMALL>のと比べてPostgreSQLはどうなのですか？
</H4>

<P>
ソフトウェアを計る方法にはいくつかあります。機能と性能と信頼性とサポートと価格です。</P>

<DL>
 <DT> <B>機能(Features)</B></DT>
 <DD>
      PostgreSQLは、トランザクション、副問い合わせ、トリガー、ビュー、外部キー整合性参照、および、洗練されたロック機構など、大規模商用<SMALL>DBMS</SMALL>が持つ機能をほとんど持っています。さらに PostgreSQLは、ユーザ定義型、継承、ルール、それから、ロック競合を縮小するマルチバージョン同時性制御など、商用<SMALL>DBMS</SMALL>も持ち合わせないような機能をいくつか持ち合わせています。<BR>
      </DD>

 <DT> <B>性能(Performance)</B></DT>
 <DD>
      PostgreSQLは他の商用あるいはオープンソースのデータベースと互角の性能も持ちます。ある面ではより早かったり、ほかの面ではより遅かったりします。MySQLなどの特化型データベース・システムにくらべて、PostgreSQLの挿入／更新が遅いのは、トランザクションによるオーバーヘッドがあるからです。もちろん、MySQLには上記の<I>Features</I>の節に示すような機能はまったくありません。我々は、PostgreSQLに柔軟性と機能性を組み込みながらも、絶えず、プロファイラーに掛けたりソースコードを解析したりして、性能の改善を続けています。PostgreSQL と MySQL とを比較している面白い Web ページが<A href="http://openacs.org/philosophy/why-not-mysql.html">http://openacs.org/philosophy/why-not-mysql.html</A>にあります。
      <BR>
PostgreSQLは、Unixプロセスを起動することによりユーザー接続を操作します。複数のバックエンド・プロセスが情報をロックしながらデータ・バッファーを共有します。マルチCPUでは、簡単に複数のバックエンドをそれぞれのCPUで走らせることができます。<BR>
      </DD>

 <DT> <B>信頼性(Reliability)</B></DT>
 <DD>
      我々は、<SMALL>DBMS</SMALL>の信頼性が高くなくてはその価値が無いことを理解してます。十分テストして、安定したコードをバグを最小にしてからリリースするように勤めてます。それぞれのリリースは少なくとも1カ月以上のベータ・テストを行ない、これまでのリリースの履歴が、製品版として安定した堅固なリリースであることを物語っています。この分野では、他のデータベースと比べても遜色がないことに自信を持っています。<BR>
      </DD>

 <DT> <B>サポート(Support)</B></DT>
 <DD>
      我々のメーリングリストは、遭遇するいかなる問題についても解決への手助けをしてくれる、開発者やユーザの大きな集まりへの接点を提供しています。我々は問題の解決を保証することはできませんが、商用データベースであっても常に解決されるわけではありません。開発者や、ユーザ・コミュニティ、マニュアル類、それに、ソースコードなどへ直接アクセスできることよって、PostgreSQLのサポートは、他の<SMALL>DBMS</SMALL>サポートよりも優れたものとなっています。御要望に答えて、事柄毎の商用サポートなどもあります（<A href="#1.6">FAQ1.6節</A>をご覧下さい）。<BR>
      </DD>

 <DT> <B>価格(Price)</B></DT>
 <DD>
      PostgreSQLの利用は、商用でも非商用でも、すべて無料です。上記に示してあるBSDスタイルの使用許諾に外れない限り、PostgreSQLのコードを制限無しで商品に組み込むことができます。<BR>
      </DD>
</DL>


<H4><A name="1.15">1.15</A>) PostgreSQLを資金面で援助するにはどうすればよいですか？
</H4>

<P>PostgreSQLは、我々が始めた 1996年以来、最高クラスの情報基盤を持っています。これはすべて、Marc Fournieさんのおかげで、彼はこの基盤を何年にもわたって創造し管理してきました。</P>

<P>質の良い基盤はオープンソース・プロジェクトにとってはとても大切なもので、前進する勢いを失うプロジェクトの分裂を回避します。</P>

<P>もちろん、この基盤は安いものではありません。維持し続けるためには毎月あるいは一時の経費がかかります。もし、あなたやあなたの会社に、こうした努力のための資金を助けるために施すことができるようでしたら、<A 
href="https://store.pgsql.com/shopping/">https://store.pgsql.com/shopping/</A>から寄付をお願いします。

<P>また、Webページには PostgreSQL,Inc とありますが、そこの"義援(contributions)"アイテムは PostgreSQL プロジェクトをサポートするためだけのためで、決して特定の会社のための資金のためではありません。もし、手形(check)の方が都合がよければ連絡先の住所へお送り下さい。</P>

<HR>

<P>さらに、もし、PostgreSQLでの成功例をお持ちであれば、ぜひ、われわれの事例サイト <a href="http://advocacy.postgresql.org">http://advocacy.postgresql.org</a>へお送りください。
</P>

<H2 align="center">ユーザー・クライアントの質問</H2>
<P>

<H4><A NAME="2.1">2.1</A>)	PostgreSQL のための <SMALL>ODBC</SMALL> ドライバーはありますか？
</H4>

<P> PsqlODBC と OpenLink <SMALL>ODBC</SMALL> の二つの <SMALL>ODBC</SMALL> ドライバーが利用可能です。</P>

<P> PsqlODBC は次の場所からダウンロードできます。 
<A href=
    "http://gborg.postgresql.org/project/psqlodbc/projdisplay.php">
    http://gborg.postgresql.org/project/psqlodbc/projdisplay.php</A>
</P>

<SMALL><PRE>
    [訳注:
	最新版は井上博司さんのサイトにあります。
	●<A HREF="http://w2422.nsk.ne.jp/~inoue/indexj.html">http://w2422.nsk.ne.jp/~inoue/indexj.html</A>
    ]
</PRE></SMALL>

<P> OpenLink <SMALL>ODBC</SMALL> は <A HREF="http://www.openlinksw.com/">http://www.openlinksw.com/</A>から入手できます。標準的な <SMALL>ODBC</SMALL> クライアント・ソフトウェアで使えますので、支援しているすべてのプラットホーム(Win, Mac, Unix, VMS)から PostgreSQL の <SMALL>ODBC</SMALL> が利用できます。

<P> たぶん彼らは、商用品質のサポートの必要な人々に売っていると思いますが、
    フリーウェア版はいつでも入手可能のようです。質問は、<A href=
    "mailto:postgres95@openlink.co.uk">postgres95@openlink.co.uk</A>
    へ送って下さい。</P>

<A HREF="http://www.PostgreSQL.org/docs/programmer/odbc.html">
Programmer's Guide</A>
の <SMALL>ODBC</SMALL> の章もご覧ください。


<P>
<H4><A NAME="2.2">2.2</A>)	PostgreSQL を Web ページと連携させるにはどんなツールがありますか？
</H4>

<P> データベースを裏に持つ Web ページについての素晴らしい紹介が、<BR>
    <A href="http://www.webreview.com">http://www.webreview.com</A>にあります。</P>
<P> Web への拡張のためには、PHP が卓越したインターフェイスとなっています。<A HREF="http://www.php.net">http://www.php.net/</A>にあります。

<SMALL><PRE>
    [訳注:
	  PHPに関する日本語の情報は、2000年4月19日に発足した日本PHPユーザ会のサイト
		<A HREF="http://www.php.gr.jp/">http://www.php.gr.jp/</A>
	あるいは、廣川 類さんのサイト
		<A HREF="http://www.geocities.jp/rui_hirokawa/php/">http://www.geocities.jp/rui_hirokawa/php/</A>
	にかなりまとめられています。
    ]
</PRE></SMALL>

<P> 処理が複雑な場合、多くの人は Perl インターフェイスと CGI.pm か mod_perl を使います。

<SMALL><PRE>
    [訳注:
	WDB は、Web から DataBase への Perl の Interface です。
	wdb-p95 へのリンクは切れてしまっています。おそらく、Perl DBI 経由で DBD::Pg の利用が可能と思われます。
	現在、WDBI という名前になっているもの
		<A HREF="http://www.egroups.com/list/wdb-users/">http://www.egroups.com/list/wdb-users/</A>
	と、WDBの名前のままのもの
		<A HREF="http://www.i-con.dk/wdb/">http://www.i-con.dk/wdb/</A>
	とがあります。その経緯はよくわかりません。
    ]
</PRE></SMALL>

<P>
<H4><A NAME="2.3">2.3</A>)	PostgreSQL にグラフィカル・ユーザインターフェイスはありますか？
</H4>
  <p>もちろん、PostgreSQL へのグラフィカルインターフェイスがいくつかあります。
その中にPgAccess <a
    href="http://www.pgaccess.com">http://www.pgaccess.com</a>
も含まれます。 
PgAdmin II (<a
    href="http://www.pgadmin.org">http://www.pgadmin.org</a> Win32-only)もあります。
RHDB Admin (<a
    href="http://sources.redhat.com/rhdb/">http://sources.redhat.com/rhdb/
</a>)と Rekall (<a href="http://www.thekompany.com/products/rekall/">
    http://www.thekompany.com/products/rekall/</a>, proprietary)もありま
す。 
PHPPgAdmin (<a href="http://phppgadmin.sourceforge.net/">
    http://phppgadmin.sourceforge.net/ </a>) はPostgreSQLへのWebベースの
インターフェイスを提供します。

<P> PgAccess と呼ばれる素晴らしいグラフィカル・ユーザ・インターフェイスがあり、この配布と共に出荷されます。PgAccess にはレポート・ジェネレータもあります。Web ページは<A HREF="http://www.pgaccess.org/">http://www.pgaccess.org/</A>です。

<P>より詳細なリストについては、<a
    href="http://techdocs.postgresql.org/guides/GUITools">http://techdocs.postgresql.org/guides/GUITools</a>
    をご覧ください。</P>

<P>
<H4><A NAME="2.4">2.4</A>)	どのような言語で PostgreSQL と通信できすか？
</H4>

<P>人気のあるほとんどの言語はPostgreSQLへのインターフェイスを持っています。
あなたが使うプログラミング言語の拡張モジュールのリストを覗いてみてください。
</P>

<P>以下のインターフェイスはPostgreSQLの配布に含まれています。

<UL>
<LI>C (libpq, libpgeasy)
<LI>埋め込みC (ecpg)
<LI>Java (jdbc)
<LI>Python (<A HREF="http://www.druid.net/pygresql/">PyGreSQL</A>)
<LI>TCL (libpgtcl)
</UL>
    <P>その他の利用可能なインターフェイスは <a 
href="http://www.PostgreSQL.org/interfaces.html">http://www.PostgreSQL.org/interfaces.html</a>
    および、
<a href="http://gborg.postgresql.org">http://gborg.postgresql.org</A>
の<I>Drivers/Interfaces</I>のセクションにあります。
    </P>

<SMALL><PRE>
    [訳注：
	永安悟史さんは Palm 版の libpq を開発されました。
		<a href="http://www.snaga.org/libpq/">http://www.snaga.org/libpq/</a>
    ]
</PRE></SMALL>

<P>
<HR>
<H2 align="center">管理上の質問</H2>
<P>

<H4><A NAME="3.1">3.1</A>)	どのようにすれば <I>/usr/local/pgsql</I> 以外の場所にインストールできますか？</H4>

<P> 簡単な方法は、 <I>configure</I> を走らせるときに --prefix オプションを指定することです。

<P>
<H4><A NAME="3.2">3.2</A>)	postmaster を走らせると、<I>Bad System Call</I> とかコア・ダンプしたとのメッセージが出ます。なぜですか？
</H4>

<P> さまざまな問題が考えられますが、まず最初にあなたのカーネルに System V IPC の拡張がインストールされているかを確認して見てください。PostgreSQL はカーネルによる共有メモリーとセマフォのサポートを必要とします。

<P>
<H4><A NAME="3.3">3.3</A>)	<I>postmaster</I> を走らせようとすると、<I>IpcMemoryCreate</I> エラーが出ます。なぜですか？
</H4>

<P> カーネルが共有メモリーを持つ設定になっていなかったか、でなければ、カーネルに対して使える共有メモリーの大きさを大きく設定する必要があります。具体的な大きさは、使っているアーキテクチャと<I>postmaster</I> を走らせるときに設定するバッファの数とバックエンドプロセスに依存します。ほとんどのシステムでは、既定値のバッファサイズのままで、少なくとも約1MBが必要です。
<A ref=
	"http://www.PostgreSQL.org/docs/view.php?version=current&amp;idoc=1&amp;file=kernel-resources.html">PostgreSQL Administrator's Gide
</A>に共有メモリーとセマフォについての情報の詳細がありますのでご覧ください。</P>


<P>
<H4><A NAME="3.4">3.4</A>)	<I>postmasterを</I>走らせようとすると、<I>IpcSemaphoreCreate</I> エラーが出ます。なぜですか？
</H4>

<P>もしエラーメッセージが<I>IpcSemaphoreCreate: semget failed (No space left on device)</I>であれば、カーネルが十分なセマフォを使えるように構成されていません。Postgresは潜在的なバックエンドプロセス毎に一つのセマフォを必要とします。とりあえずの解決策は<I>postmaster</I>を起動するときに、バックエンドプロセスの数をより少なく制限をすることです。既定値の32より小さな数のパラメータを<I>-N</I>で使います。より恒久的な解決策は、カーネルの<SMALL>SEMMNS</SMALL> と <SMALL>SEMMNI</SMALL> パラメータを増やすことです。

    <P>操作不能のセマフォも過度なデータベースアクセスの間にクラッシュを
起こす可能性があります。
</P>

<P>もし、エラーメッセージがなにか他のものであれば、カーネルの構成でまったくセマフォのサポートをしていないかもしれません。
PostgreSQL Administrator's Gide に共有メモリーとセマフォについての情報の詳細があります。</P>

<P>

<H4><A NAME="3.5">3.5</A>)	他のホストからの接続はどのように制御しますか？
</H4>

<P>	既定値では、PostgreSQL は unix ドメインソケットを使うローカルマシンからの接続しか許しません。<I>postmaster</I> 起動に <I>-i</I> フラッグを加え、<I>$PGDATA/pg_hba.conf</I> ファイルを適切に直して、ホスト主導型の認証を使わないかぎりは他のマシンからは接続できないでしょう。これによりTCP/IPの接続が可能になります。
<p>操作不能なセマフォも過度のデータベースアクセス中にクラッシュを引き起こすことがあります。

<P>
<H4><A NAME="3.6">3.6</A>)	より良い性能を得るためには、データベース・エンジンをどのように調整すれば良いですか？
</H4>

<P> 確かにインデックスは問い合わせの速度を増します。<SMALL>EXPLAIN</SMALL>コマンドで PostgreSQL がどのようにあなたの問い合わせを翻訳しているかを見ることができ、そして、どのインデックスが使われているかを見ることができます。
<P>もし <SMALL>INSERT</SMALL> を多用している場合は、<SMALL>COPY</SMALL> コマンドを使って大きなバッチ処理でそれを行なうことを検討して下さい。これは、<SMALL>INSERT</SMALL> を別々に行なうよりもっと高速です。次に、<SMALL>BEGIN WORK/COMMIT</SMALL> のトランザクション・ブロックの中に無い文は、それら自身がそれぞれのトランザクションに入っていると見なされます。いくつかの文を一つのトランザクション・ブロックの中で行なうことを考えて下さい。これによりトランザクションのオーバーヘッドが減ります。また、大きなデータの変更を行なう際はインデックスを一度外して、作り直すことを考えてみて下さい。

<P> チューニングのオプションがいくつかあります。<I>postmaster</I> を <I>-o -F</I> オプションで起動することによって、<I>fsync()</I> を無効にすることができます。これによって、各トランザクション毎に <I>fsync()</I> でディスクを更新するのを止めさせます。

<P> <I>postmaster</I> <I>-B</I> オプションを使ってバックエンド・プロセスにより使われる共有メモリー・バッファを大きくすることもできます。もし、このパラメータを高くしすぎると、カーネルの共有メモリー空間の制限値を越えてしまっうために <I>postmaster</I> が走らなくなるでしょう。既定値では、それぞれのバッファの大きさは 8K で、バッファ数は 64 です。

<P> バックエンドを <I>-S</I> オプションを使って、それぞれのバックエンド・プロセスが一時的な並べ替えによって使うメモリーの最大サイズを増やすこともできます。 その <I>-S</I> の値はキロバイト単位で、既定値は 512 (すなわち、512K)です。

<P> また、<SMALL>CLUSTER</SMALL> コマンドを使って、テーブルのデータをインデックスに合わせるためにグループ化することもできます。詳しくは、オンラインマニュアルで <I>CLUSTER</I> を見て下さい。

<P>
<H4><A NAME="3.7">3.7</A>)	どのようなデバグ機能が使えますか？</H4>

<P> PostgreSQL は、デバグのために意味のある、状態情報を報告するいくつかの機能を持ちます。

<P> まず、--enable-cassert オプションで <I>configure</I> を走らせます。そうしてコンパイルすることにより、沢山の <I>assert()</I> が、バックエンドの進捗状況を監視し、何か予期せぬことが起きるとプログラムを停止するようになります。

<P> <I>postmaster</I> と <I>postgres</I> の両方でいくつかのデバグ・オプションの利用ができます。まず、次のように  <I>postmaster</I> を起動するときはいつでも、標準出力とエラー出力をログ・ファイルに送るようにしてあることを確かめて下さい。

<PRE>
	cd /usr/local/pgsql
	./bin/postmaster &gt;server.log 2&gt;&1 &
</PRE>

<P> これにより PostgreSQL の最上部のディレクトリに server.log ファイルが置かれます。このファイルはサーバーが遭遇した問題やエラーについて有用な情報を含みます。<I>Postmaster</I> は更に詳細な情報を報告するための <I>-d</I> オプションを持ちます。その <I>-d</I> オプションは、デバグ・レベルを指定します。高いデバグ・レベルでは、大きなログファイルを生成することに注意しなくてはなりません。

<P>もし、<i>postmaster</i>が走っていなければ、<I>postgres</I>バックエンドをコマンド行から走らせることができ、直接<SMALL>SQL</SMALL>文をタイプすることができます。このやりかたは、デバグ目的のとき<B>だけ</B>お奨めします。セミコロンではなく、改行が問い合わせの終りになることに注意してください。もし、デバグシンボルを入れてコンパイルしていれば、デバッガを使って何が起きているかを見ることができます。postmaster からバックエンドを開始したわけではないので、独立な環境で走っているのではなくロック／バックエンドとの対話の問題が重複することはありません。

	<P> もし、<i>postmaster</i>が走っていれば、あるウィンドウで
<I>psql</I>を開始すると、<i>psql</i> で使われる <i>postgres</i> プロセス
の<SMALL>PID</SMALL>が見つかります。デバッガを使って
<i>postgres</i>の<SMALL>PID</SMALL>にアタッチ(attach)します。デバッ
ガの中からブレーク・ポイントをセットし、<i>psql</i> から問い合わせを発行
します。デバグのために<i>postgres</i>を始動する場合は、PGOPTIONS="-W n" 
を設定でき、それから、<i>psql</i> を開始します。これにより、<i>n</i> 秒
開始を遅らせるはずなので、デバッガでプロセスにアタッチして、ブレークポイ
ントを設定し、開始から順を追って見てゆくことができます。

<P> PostgreSQL プログラムには、デバグと性能測定にとても役に立つ <I>-s</I>や <I>-A</I>や <I>-t</I> 等のオプションがあります。

<P> 何という関数がどのくらい実行時間を食っているかを見るために、プロファイリング（プロフィール付き）でコンパイルすることも可能です。そのバックエンドのプロフィール・ファイルは <I>pgsql/data/base/dbname</I> ディレクトリに格納されるでしょう。クライアントのプロフィールはクライアントの現行ディレクトリに置かれるでしょう。Linux でまともなプロファイリングを行うには <I>-DLINUX_PROFILE</I> でコンパイルする必要があります。


<P>
<H4><A NAME="3.8">3.8</A>)	接続しようとするときに <I>'Sorry, too many clients'</I> が出るのはなぜですか？
</H4>

<P> <I>postmasterが</I>同時始動できるバックエンドプロセスに対する制限数を増やす必要があります。
<P>既定の最大プロセスは32プロセスです。<I>-N</I>に適切な値を引数にして<I>postmaster</I>を再起動するか、PostgreSQL.conf を修正することによって、その値を増やすことができます。

。既定の構成では<I>-N</I>は最大1024まで設定できます。もし、もっと必要であれば<I>include/config.h</I>の中の<SMALL>MAXBACKENDS</SMALL>を増加させ、再構築します。もし、望むなら<I>configure</I>の <I>--with-maxbackends</I>切替を使って、<I>-N</I>の既定値を構成時に設定できます。

<P>もし、<I>-N</I> を 32よりも大きくするのであれば、<I>-B</I>も既定の64より大きい値に増加させなくてはならないし、<I>-B</I> は少なくとも <I>-N</I> の2倍はなくてはならず、おそらく最高性能を望むならばそれより大きい値が必要なはずです。バックエンドプロセスをたくさんにすると、いろいろなUnixカーネル構成パラメータも増やすことが必要になるかもしれません。
共有メモリー・ブロックの最大値(<SMALL>SHMMAX</SMALL>)、
セマフォの最大数(<SMALL>SEMMNS</SMALL>と<SMALL>SEMMNI</SMALL>)、
プロセスの最大数(<SMALL>NPROC</SMALL>)、
ユーザ毎の最大プロセス数(<SMALL>MAXUPRC</SMALL>)、
開くファイルの最大数(<SMALL>NFILE</SMALL>と<SMALL>NINODE</SMALL>
も確認事項に含まれます。
PostgreSQLに許されるバックエンドのプロセス数が制限されているのは、
システムのリソースを使い果してしまうことを避けるためです。

<P>
<H4><A NAME="3.9">3.9</A>)	pgsql_tmp</I> ディレクトリの中には何がありますか？
</H4>

<P> 問い合わせ実行モジュールによって生成された一時的なファイルが、このディ
レクトリに含まれます。例えば、もし <SMALL>ORDER BY</SMALL> 句を満たすためにバックエンドの <I>-S</I> パラメータで許可した値よりも大きなスペースがソートの際に必要だとすると、溢れたデータを保持するために一時的なファイルがいくつかここに生成されます。
<P>
一時的なファイルは自動的に消し去られるはずですが、もし、ソートの途中でバックエンドがクラッシュしてしまうとそうはなりません。<I>postmaster</I>の停止とリスタートでこれらのファイルはディレクトリから消しさられます。

<SMALL><PRE>
    [訳注：
	 SYSLOGD 経由でログを出力するには、まず、configure を --enable-syslog 
	付きで走らせた後、コンパイルとインストールを行ないます。
	 次に、syslog.conf に local?.* の 出力先を指定し(環境変数で変更可能)、
	syslogd に HUP シグナルを送って初期化しておきます。そして、
	$PGDATA/pg_options に syslog=2 を加えて、 postmaster を -S 
	オプション付きにてサーバモードで起動します。(バージョン 7.1 からは 
	pg_options は PostgreSQL.conf になっています。)
    ]
</PRE></SMALL>
<P>
<H4><A name="3.10">3.10</A>)  PostgreSQLのメジャーリリースをアップデートするのにダンプとリストアをしなくてはならないのはなぜですか？</H4>
<P>
PostgreSQLチームはマイナーリリースでは小さな変更しか行ないませんので、7.2 から 7.2.1 へのアップグレードにはダンプとリストアの必要はありません。しかし、メジャーリリース(たとえば、7.2から7.3へのような)では、システムテーブルやデータファイルの内部フォーマットの変更をしばしば行ないます。これらの変更はたいてい複雑で、そのため我々はデータファイルのための後方互換性を維持することができません。ダンプは汎用フォーマットでデータを出力し、それを新しい内部フォーマットに読み込むことができます。
<P>
同一リリースではディスク上でのフォーマットに変更はないので、アップグレードにはダンプ／リストアではなく、<I>pg_upgrade</I> スクリプトを使うことができます。リリースノートには、<I>pg_upgrade</I> が利用可能なリリースかどうか記されています。</P>

<P>
<HR>
<H2 align="center">操作上の質問</H2>
<P>

<H4><A NAME="4.1">4.1</A>)	バイナリ・カーソルと通常カーソルとの厳密な違いは何ですか？
</H4>

<P> 詳述は、オンラインマニュアルで <SMALL>DECLARE</SMALL> を見て下さい。

<P>
<H4><A NAME="4.2">4.2</A>)	最初の数ロウのみを <SMALL>SELECT</SMALL>するにはどうしますか？ランダムな行？
</H4>

<P> オンラインマニュアルで<SMALL>FETCH</SMALL>を見てください。あるいは、SELECT ... LIMIT....を使ってみて下さい。

<P>たとえ、欲しいのは最初の数ロウだけでも、すべての問い合わせを評価しなくてはならないかもしれません。<SMALL>ORDER BY</SMALL> を持った問い合わせを使うことを考えてみて下さい。
もし、<SMALL>ORDER BY</SMALL>に合ったインデックスがあるとすると PostgreSQLは要求された最初の数ロウだけで評価できるかもしれませんが、でなれば、PostgreSQL は意図したロウが生成されるまですべてのロウを評価しなければならないかもしれません。

   <P>ランダムな行を<SMALL>SELECT</SMALL>するには、次の文を使います： 
<PRE>
    SELECT col
    FROM tab
    ORDER BY random()
    LIMIT 1;
</PRE>

<P>
<H4><A NAME="4.3">4.3</A>)	テーブルやその他の情報のリストを <I>psql</I> で見るにはどうしますか？
</H4>

<P>
  <I>psql</I>のソースコードとして書かれた <I>pgsql/src/bin/psql/describe.c</I> ファイルを読むことがその答えです。
そこには、psqlのバックスラッシュコマンドによる出力のための<SMALL>SQL</SMALL>コマンドが含まれています。 <I>psql</I> に <I>-E</I> オプションをつけて起動すれば、与えたコマンドを実行するための問い合わせが出力されます。
<P>


<H4><A NAME="4.4">4.4</A>)	テーブルからカラムの削除、あるいは、データ型を変更するにはどうしますか？
</H4>

<P> <SMALL>DROP COLUMN</SMALL>機能が、<SMALL>ALTER TABLE DROP COLUMN</SMALL> としてリリース7.3
に加えられました。それまでのバージョンでは、その代わりにこうします:

<PRE>
	BEGIN;
	LOCK TABLE old_table;
	SELECT ...  -- 削除したいカラム以外のカラムをすべて選択します。
	INTO TABLE new_table
	FROM old_table;
	DROP TABLE old_table;
	ALTER TABLE new_table RENAME TO old_table;
	COMMIT;
</PRE>

<P>カラムのデータタイプは次の文で変えられます： 

<PRE>
    BEGIN;
    ALTER TABLE tab ADD COLUMN new_col <i>new_data_type</i>;
    UPDATE tab SET new_col = CAST(old_col AS <i>new_data_type</i>);
    ALTER TABLE DROP tab COLUMN old_col;
    COMMIT;
</PRE>

<P>これを行なったときは、抹消された行が使っているディスク空間を回収するために<I>VACUUM FULL tab</I>をしたほうが良いかもしれません。

<P>
<H4><A NAME="4.5">4.5</A>)	ロウ、テーブル、データベースの最大サイズは？
</H4>

<P> 制限は以下のとおりです。
<PRE>
データベースの最大サイズ? 	制限無し (4 TB のデータベースも存在します)
テーブルの最大サイズ?           32TB
ロウの最大サイズ?               1.6TB
フィールドの最大サイズ?         1GB
テーブル内での最大ロウ数?       制限無し
テーブル内での最大カラム数?     カラムの型により250-1600
テーブル内での最大インデクス数? 制限無し
</PRE>

<P> もちろん、これらは実際は無制限ではなく、ディスク容量とメモリーやスワップスペースの大きさにより制限されます。性能はこれらの値がことのほか大きな時に煽りを受けます。

<P> 最大テーブルサイズの32TBはオペレーティングシステムによる巨大ファイルのサポートは必要としません。巨大なテーブルは複数の1GBのファイルに分けて保存されますので、ファイルシステムの制限は重要ではありません。

<P> デフォルトのブロックサイズを32kにすることで、最大テーブルサイズと最大カラム数とが４倍させることができます。


<P>
<H4><A NAME="4.6">4.6</A>)	一般的なテキストファイルからデータを保存するには、データベースのディスク容量はどのくらい必要です？
</H4>

普通のテキストファイルを PostgreSQL のデータベースに保存するには、最大で約5倍のディスク容量を必要とします。<P>

<P> 例題として、各行に整数とテキスト記述を持つ 100,000行のファイルを考え
てみましょう。テキストの文字列の平均長さを20バイトと仮定すると、フラット
ファイルの大きさは約2.8MB です。このデータを含む PostgreSQL データベース
ファイルの大きさは次のように約6.4MBと見積もることができます：

<PRE>
    36 bytes: 各ロウのヘッダ(概算)
    24 bytes: 整数(int)フィールドとテキスト(text)フィールド
   + 4 bytes: ページ上のタップルへのポインタ
   ----------------------------------------
   64 bytes per row

   PostgreSQL のデータページサイズは 8192バイト(8KB)なので:

   8192 bytes per page
   -------------------   =  128 rows per database page (切り上げ)
     64 bytes per row

   100000 data rows
   --------------------  =  782 database pages
      128 rows per page
 
782 database pages * 8192 bytes per page  =  6,406,144 bytes (6.4 MB)
</PRE>

<P>
インデックスは、これほどのオーバヘッドは要求しませんが、インデックス付けされるデータを含む以上、それなりに大きくなります。
<P><SMALL>NULL</SMALL>はビットマップに保存されていて、それらがわずかにスペースを使います。


<P>
<H4><A NAME="4.7">4.7</A>)	定義されたテーブル、インデックス、データベース、および、ユーザをどのようにして見つけ出しますか？
</H4>

<P> <I>psql</I> にはいろいろなバックスラッシュ・コマンドがあり、こうした情報を表示します。バックスラッシュ・コマンドの種類を見るには \? を使って下さい。
<P> また、<I>pgsql/src/tutorial/syscat.source</I> ファイルを走らせてみて下さい。それは、沢山の <SMALL>SELECT</SMALL> 文により必要な情報をデータベースのシステム・テーブルから取り出して例示してくれます。また、<i>pg_</i> で始まるシステムテーブルにも記述されています。さらに、<i>psql -l</i> はすべてのデータベースをリスト表示します。

<P>
<H4><A NAME="4.8">4.8</A>)	問い合わせが遅いうえ、インデックスを使っている様子がありません。なぜですか？
</H4>

インデックスは自動的にすべての問い合わせで使われるわけではありません。テー
ブルが最小サイズより大きく、問い合わせでそのわずかなパーセンテージのロウを
選択する時だけ、インデックスは使われます。これはインデックススキャンによ
り起こされるランダムなディスクアクセスは、テーブルをストレートに読む順次
走査よりも遅くなることがあるからです。

    <P>インデックスを使うかを決定するために、PostgreSQL はテーブルについ
ての統計情報を持たなければなりません。この統計情報は、<SMALL>VACUUM
ANALYZE</SMALL>または、単に <SMALL>ANALYZE</SMALL> を使って収集すること
ができます。統計情報を使ってオブティマイザはテーブルの中にあるロウ数を知
り、インデックスを使うべきかのの決定をより正しくできます。統計情報は最適
な結合順や結合方法を決める上でも貴重なものもあります。統計情報の収集は、
テーブルの内容がかわると毎に繰返しなされるべきです。</P>

    <P> インデックスは、通常 <SMALL>ORDER BY</SMALL> や結合を行な
うためには使われません。順次スキャンに続く明示的ソートは、巨大なテーブル
のインデックススキャンよりも普通は高速です。</P>
    しかし、<SMALL>ORDER BY</SMALL>と組み合わされた<SMALL>LIMIT</SMALL> 
は、テーブルの小さな部分を返すためにたびたびインデックスを使うでしょう。
実際、MAX() や MIN() がインデックスを使わないとしても、このような値を
ORDER BY と LIMIT を使ってインデックスを使って取り出すことが可能です:

<PRE>
    SELECT col
    FROM tab
    ORDER BY col [ DESC ]
    LIMIT 1;
</PRE>

    <P>もし、オプティマイザが間違ってシーケンシャルスキャンを選択したことに疑いがなければ、<CODE>SET enable_seqscan TO 'off'</CODE>を使ってインデクススキャンでまちがいなく速くなっているかをテストをしてみてください。</P>

    <P> <SMALL>LIKE</SMALL> あるいは <I>~</I> のようなワイルドカード演算
子は特別な環境でしか使えません：
    <UL>
    <LI>検索文字列が文字列の最初にききます。たとえば：</LI>
    <UL>
    <LI><SMALL>LIKE</SMALL> パターンが<I>%</I>で始まらない</LI>
    <LI><I>~</I> (正規表現) パターンは<I>^</I>で始まらなければならない</LI>
    </UL>
    <LI>検索文字列を文字クラスから始めることはできません。たとえば、[a-e]。</LI>
    <LI><SMALL>ILIKE</SMALL> や <I>~*</I> のような大文字と小文字を区別し
	ない検索は使えません。そのかわり、このFAQの<a href="#4.12">4.12</a>節で説明する関数のインデックスが使えます。</LI>
    <LI>initdb においては、デフォルトで<I>C</I>ロケールが使われなくてはなりません。</i></LI>
    </UL>
    <P>

[訳注：
	強制的にインデックスを使うには SET enable_seqscan = off を実行します。
]


<P>
<H4><A NAME="4.9">4.9</A>)	問い合わせオブティマイザがどのように問い合わせを評価するのかを見るにはどうしますか？
</H4>

<P> オンラインマニュアルで <SMALL>EXPLAIN</SMALL> を見て下さい。

<P>
<H3><A NAME="4.10">4.10</A>)	R-tree インデックスとは何ですか？</H3>

<P> R-tree インデックスは空間的なデータにインデックスを付けるために使われます。ハッシュインデックスでは範囲の検索ができません。また、B-tree インデックスでは、１次元でしか範囲の検索ができません。R-tree インデックスであれば多次元のデータを扱えます。たとえば、もし R-tree インデックスを <I>point</I> 型の属性に付けることができるとするとシステムは、「長方形に囲まれた点をすべて選択する」というような問い合わせに、より効率良く答えられます。

<P> R-Tree の設計の原典となる権威ある論文は:

<P> Guttman, A. "R-Trees: A Dynamic Index Structure for Spatial Searching."
Proceedings of the 1984 ACM SIGMOD Int'l Conf on Mgmt of Data, 45-57.

<P> この論文は、Stonebraker 教授の "Readings in Database Systems"
でも取り上げられています。

<P>
<SMALL><PRE>
    [訳注：
	  奈良先端大の石川佳治さんよりR-Tree関係の文献を紹介して頂きました。
	日本語 Postgres ML のアーカイブから "Subject: [postgres95 801] spatial data structures" 
		<A HREF="http://www.sra.co.jp/people/t-ishii/PostgreSQL/mhonarc/pgsql-jp/1996Oct/msg00007.html">http://www.sra.co.jp/people/t-ishii/PostgreSQL/mhonarc/pgsql-jp/1996Oct/msg00007.html</A>
	をご覧下さい。
    ]
</PRE></SMALL>

<P> 組込みの R-Tree でポリゴンやボックスを操作できます。理論的にはR-Tree はもっと高い次元を操作するようにも拡張できます。実質的には、R-Tree の拡張にはちょっとした作業が必要でして、現在、我々はそれをどのようにするかについての文書を持っていません。

<P>
<SMALL><PRE>
    [訳注：
	  インターウィズの片岡さんが多次元幾何オブジェクトへの拡張作業中です。詳しくは、
	<A HREF="http://www.interwiz.koganei.tokyo.jp/software/geometric/index.html">http://www.interwiz.koganei.tokyo.jp/software/geometric/index.html</A>
	をご覧ください。
    ]
</PRE></SMALL>


<P>
<H4><A NAME="4.11">4.11</A>)	遺伝的問い合わせ最適化とは何ですか？
</H4>

<P> GEQO モジュールは、沢山のテーブルを結合するときに、遺伝的アルゴリズム(GA)で問合わせを高速化します。これにより、しらみつぶしに探索を行なわなくても、大きな結合(join queries)を扱うことができるようになります。

<P>
<H4><A NAME="4.12">4.12</A>)	正規表現での検索や大文字と小文字とを区別しない正規表現検索はどのように実現しますか？大文字と小文字とを区別しない検索のためのインデックスはどのように使いますか？
</H4>

<P>
<I>~</I>演算子は正規表現照合を行ない、<I>~*</I> は大文字と小文字を区別しない(case-insensitive)正規表現照合を行います。 大文字と小文字を区別しない <SMALL>LIKE</SMALL> 演算子を <SMALL>ILIKE</SMALL> といいます。


<P>大文字と小文字を区別しない等値比較次のように表現できる：
   
<PRE>
    SELECT *
    FROM tab
    WHERE lower(col) = 'abc';
</PRE>

標準インデックスでは使われず、しかしながら、もし関数インデックスを
作ったならそれが使われるでしょう。

   <PRE>
   CREATE INDEX tabindex ON tab (lower(col));
   </PRE>




<PRE>
	WHERE lower(textfield) LIKE lower(pattern)
</PRE>


<P>
<H4><A NAME="4.13">4.13</A>)	問い合わせの中で、フィールドが <SMALL>NULL</SMALL> であることを検出するにはどうしますか？
</H4>

    <P>カラムを <SMALL>IS NULL</SMALL> と <SMALL>IS NOT NULL</SMALL>
とで試してみます。</P>

<P>
<H4><A NAME="4.14">4.14</A>)	様々な文字型のそれぞれの違いは何ですか？
</H4>

<PRE>
Type            Internal Name   Notes
--------------------------------------------------
CHAR(n)         bpchar          指定された固定長となるように空白が詰められる
"char"          char            １文字
VARCHAR(n)      varchar         最大長のサイズを指定する、詰め物無し
TEXT            text            長さに上限の無いテキスト
BYTEA           bytea           可変長のバイト配列(null-byte safe)
</PRE>

<P> 内部名にお目にかかるのは、システム・カタログを調べるときや、エラーメッセージを受け取るときです。


<P> 上記の型のうち最初の４つの型は "varlena" 型です(すなわち、ディスクの最初の４バイトがデータ長で、それの後に実際のデータが続きます)。このように実際の空間は宣言された大きさよりも少し大きくなります。しかし、これらのデータ型は<SMALL>TOAST</SMALL>により圧縮されたり複数ロウに渡って保存されたりして、ディスク上の空間は思ったより小さくなります。

    <P><SMALL>VARCHAR(n)</SMALL> は可変長の文字列を保存するのに最適ですが、保存できる文字列の長さに制限があります。<SMALL>TEXT</SMALL> は長さに制限の無い文字列の保存ためのもので、最大で 1ギガバイトです。 <SMALL>CHAR(n)</SMALL>は、<SMALL>VARCHAR(n)</SMALL>が与えられた文字だけを保存するのに対し、ブランクを詰め込んでいつも同じ長さで文字列を保存するのに最適です。<SMALL>BYTEA</SMALL>は、部分的に<SMALL>NULL</SMALL> のバイトを含むバイナリデータを保存するためのものです。これらのタイプは同じくらいの性能特性ををもちます。</P>

<P>
<H4><A NAME="4.15.1">4.15.1</A>)	通番(serial)／自動増分フィールドはどのようにつくりますか？
</H4>

<P> PostgreSQL は <SMALL>SERIAL</SMALL> データ型をサポートします。カラム上に通番とインデックスを自動作成します。たとえば、

<PRE>
	CREATE TABLE person ( 
		id   SERIAL, 
		name TEXT 
	);
</PRE>
は自動的に次のように翻訳されます:
<PRE>
	CREATE SEQUENCE person_id_seq;
	CREATE TABLE person ( 
		id   INT4 NOT NULL DEFAULT nextval('person_id_seq'),
		name TEXT 
	);
	CREATE UNIQUE INDEX person_id_key ON person ( id );

    [訳注：
	CREATE UNIQUE INDEX person_id_key ON person ( id );
	は、 7.3 からは自動的には行なわれなくなりました。
    ]
</PRE>

通番についてのもっと詳しい情報は、オンラインマニュアルで <I>create_sequence</I> をご覧下さい。
<P> また、各ロウの<I>OID</I>フィールドを一意値として使うこともできます。しかしながら、もしもデータベースをダンプしてりロードする必要がある場合は、<SMALL>OID</SMALL>を温存するために<I>pg_dump</I> で <I>-o</I>オプションを使うか、または、<SMALL>COPY WITH OIDS</small>オプションを使う必要があります。

 Bruce Momjian の<A HREF="http://www.PostgreSQL.org/docs/aw_pgsql_book">(http://www.PostgreSQL.org/docs/aw_pgsql_book)の Numbering Rows</A>の章にありあます。


<H4><A NAME="4.15.2">4.15.2</A>)	<SMALL>SERIAL</SMALL>データ型に挿入される値は、どうすれば得られますか？
</H4>
    <P>ひとつの方法は、<I>nextval()</I> 関数を使ってその値を挿入する<I>前(before)に</I> SEQUENCE オブジェクトから次の <SMALL>SERIAL</SMALL> 値を取り出し、それから実際に挿入をすることです。<A HREF="#4.15.1">4.15.1</A> のテーブルの例を使うとすると、疑似言語ではこのようになります。

<PRE>
	new_id = execute("SELECT nextval('person_id_seq')");
	execute("INSERT INTO person (id, name) VALUES (new_id, 'Blaise Pascal')");
</PRE>

そうして、<tt>new_id</tt> に保存した新しい値を他の問い合わせに(たとえば、<tt>person</tt> テーブルに対する外部キー(foreign key)のように)使うとよいでしょう。自動的に作られた<SMALL>SEQUENCE</SMALL>オブジェクトの名前は、&lt;<I>table</I>&gt;_&lt;<I>serialcolumn</I>&gt;_<I>seq</I> のようになり、このうち、<I>table</I> と <I>serialcolumn</I> はそれぞれテーブルの名前と<SMALL>SERIAL</SMALL>カラムの名前です。
<P>

あるいは、与えられた<SMALL>SERIAL</SMALL>値を、それが既定値として挿入された<I>後で(after)</I>、 <I>currval()</I> 関数を使って取り出すこともできます。たとえば、

<PRE>
	execute("INSERT INTO person (name) VALUES ('Blaise Pascal')");
	new_id = execute("SELECT currval('person_id_seq')");
</PRE>

最後に、<SMALL>INSERT</SMALL>文から返る<A HREF="#4.17"><SMALL>OID</SMALL></A>を使って、既定値をみつけることもできますが、しかし、oidの値は40億に達するともとに戻ってしまい、最も移植性の低いやり方となるでしょう。PerlのDBIで Edmund Mergl の作った DBD::Pg モジュールを使えば、$sth-&gt;execute() の後に $sth-&gt{pg_oid_status} を経由してその OID 値を使えるようにすることはできます。

<P> 
<H4><A NAME="4.15.3">4.15.3</A>)	他のユーザとの競合状態を避けるためには、<I>currval()</I> と <I>nextval()</I> は使わないほうがよいのでしょうか？
</H4>

    <P>それはありません。<I>currval()</I> は、すべてのユーザではありませんが、あなたのバックエンドに与えられた現在の値を返します。


<H4><A name="4.15.4">4.15.4</A>) トランザクションが中断したときにもういちどシーケンス番号が使われないのはなぜですか？シーケンス／SERIALカラムに空きがあるのはなぜですか？
</H4>

    <P>同時性を改善するために、実行中のトランザクションに、必要でトランザクションが終了するまでロックされないシーケンス値を与えています。このためトランザクションが中断されると番号割り当てにギャップを生じます。
</P>

<P> 
<H4><A NAME="4.16">4.16</A>)	<SMALL>OID</SMALL> とは何ですか？ <SMALL>TID</SMALL> とは何ですか？
</H4>

<P> <SMALL>OID</SMALL> とは一意のロウID に対する PostgreSQL の答えです。PostgreSQL の中でつくられるすべてのロウは一意の <SMALL>OID</SMALL> を得ます。<I>initdb</I> で発生される <SMALL>OID</SMALL> はすべて 16384 (<I>include/access/transam.h</I> から)より小さな値です。<I>initdb</I> 後のすべての <SMALL>OID</SMALL> (ユーザ作成)はそれ以上の値になります。
既定では、これらすべての <SMALL>OID</SMALL>は一つのデーブルやデータベース内に留まらず、PostgreSQL インストレーション全体の中で一意です。

<P> PostgreSQL はテーブル間のロウを結びつけるために、そのシステムテーブル内に <SMALL>OID</SMALL> を使います。この <SMALL>OID</SMALL> は特定のユーザのロウを識別するためや結合の中で使われることができます。<SMALL>OID</SMALL> の値を保存するためには <I>OID</I> 型をカラムに使うことを奨めます。より速くアクセスするために <I>OID</I> フィールドにインデックスを作ることができます。

  O<SMALL>ID</SMALL> は、全てのデータベースで使われる中央領域から、全ての新しいロウに割り当てられます。<SMALL>OID</SMALL> を他の何かに変えたい、あるいは元の <SMALL>OID</SMALL> もテーブルと一緒にコピーしたいのなら、できなくはありません。


<PRE>
        CREATE TABLE new (old_oid oid, mycol int);
        SELECT old_oid, mycol INTO new FROM old;
        COPY new TO '/tmp/pgtable';
        DELETE FROM new;
        COPY new WITH OIDS FROM '/tmp/pgtable';
<!--
	CREATE TABLE new_table (mycol int);
	INSERT INTO new_table (oid, mycol) SELECT oid, mycol FROM old_table;
-->
</PRE>

<P> O<SMALL>ID</SMALL> は、4バイトの整数として保存されているので、40億を越えると溢れてしまうでしょう。誰もこれが起きたと報告してくる人はいませんでしたが、そうなる前にこの制限を取り除くことを計画しています。

<P> T<SMALL>ID</SMALL> は特定の物理ロウをそのブロックとオフセット値で識別するために使われます。<SMALL>TID</SMALL> はロウが修正されたり再ロードされると変わります。それらの <SMALL>TID</SMALL> は、物理ロウを指すためにインデックス記載で使われます。

<P>
<H4><A NAME="4.17">4.17</A>)	PostgreSQL で使われるいくつかの用語の意味は何ですか？
</H4>

<P> いくつかのソースコードや古い文書の中には、それぞの専門分野の中でもっと一般的に使われる専門用語が使われています。

<UL>
<LI> テーブル(table)、関係(relation)、クラス(class)
<LI> ロウ(row)、レコード(record)、タップル(tuple)
<LI> カラム(column)、フィールド(field)、属性(attribute)
<LI> 取得(retrieve)、選択(select)
<LI> 置換(replace)、更新(update)
<LI> 追加(append)、挿入(insert)
<LI> <SMALL>OID</SMALL>, 連番(serial value)
<LI> ポータル(portal), カーソル(cursor)
<LI> 領域変数(range variable)、テーブル名(table name)、テーブル別名(table alias)
</UL>
<P>一般的なデータベース用語のリストは：<a
href="http://hea-www.harvard.edu/MST/simul/software/docs/pkgs/pgsql/glossary/glossary.html">http://hea-www.harvard.edu/MST/simul/software/docs/pkgs/pgsql/glossary/glossary.html</A>
で見つけられます。</P>

<P>
<H4><A NAME="4.18">4.18</A>) エラーメッセージ <I>"ERROR: Memory exhausted in AllocSetAlloc()"</I>が出るのはなぜですか？
</H4>
<P>
おそらく、システムの仮想メモリーを全て使い果たしてしまっている可能性があるか、カーネルがあるリソースについてもつ制限値が低すぎる可能性があります。
<I>postmaster</I> を始動する前にこれを試してみて下さい：

<PRE>
	ulimit -d 262144
	limit datasize 256m
</PRE>

<P> 
シェルによって、どちらかひとつが成功するでしょうが、これはプロセスのデータセグメント制限をより高く設定し、たぶん問い合わせが完結するようになるでしょう。このコマンドは現行のプロセスと、このコマンドを走らせた後に作られる全てのサブプロセスについて適用されます。バックエンドがとても多くのデータを返すために<SMALL>SQL</SMALL> クライアントで問題が続いているのであれば、クライアントを開始する前にこれを試してみてください。

<P>
<H4><A NAME="4.19">4.19</A>) どのバージョンの PostgreSQL を走らせているかを調べるにはどうしますか？<BR>
</H4>
<P>
<I>psql</I> から <CODE>SELECT version();</CODE> をタイプします。
<P>


<H4><A NAME="4.20">4.20</A>)	ラージ・オブジェクトの操作で<I>invalid large obj descriptor</I> を受け取りました。なぜでしょうか？
</H4>

<P>ラージ・オブジェクト操作をするときは、前後に<tt>BEGIN WORK</tt>と<tt>COMMIT</tt>を付ける必要があります。すなわち、<tt>lo_open</tt> ... <tt>lo_close</tt>をはさみ込みます。

<P>現在は、PostgreSQLのトランザクションのコミット時にラージ・オブジェクト・ハンドルを閉じることにより、<I>lo_open</I>コマンドが完了した直後に強制的にルールを実行します。このため、最初にハンドルに対して何かをしようとすると、<I>invalid large obj descriptor(ラージ・オブジェクトの記述子が不正)</I>となります。それで、もし、トランザクションを使うのを忘れると、（少なくともほとんどの時間）働いていたコードがエラーメッセージを出すのです。

<P>もし、<SMALL>ODBC</SMALL>のようなクライアントインターフェイスをお使いなら、<tt>auto-commit off</tt>を設定する必要があるかもしれません。
<P>


<H4><A NAME="4.21">4.21</A>) 現在の時刻がデフォルトとなるようなカラムはどのようにつくりますか？<BR></H4>

<P><i>CURRENT_TIMESTAMP</i>を使います:
<PRE>
	CREATE TABLE test (x int, modtime timestamp DEFAULT >CURRENT_TIMESTAMP );
</PRE>
<P>


<H4><A NAME="4.22">4.22</A>)	なぜ、<SMALL>IN</SMALL>を使う副問い合わせがとても遅いのですか？
</H4>
<P>
現在、外部問い合わせの各ロウについて副問い合わせの結果を順番にスキャンすることにより、副問い合わせを外部問い合わせに結合しています。もし、副問い合わせが数行しか返さず、外部問い合わせが沢山の行を返すなら、当面は<CODE>IN</CODE>を<CODE>EXISTS</CODE>で置き換えることです：
<PRE>
	SELECT *
	FROM tab
	WHERE col1 IN (SELECT subcol FROM subtab)
</PRE>
を、置き換えて：
<PRE>
	SELECT *
	FROM tab
	WHERE EXISTS (SELECT subcol FROM subtab WHERE subcol = col)
</PRE>
とします。
これが手っ取り早いですが、<CODE>subcol</CODE>は索引付きカラムであるべきです。
ここで示した問題は7.4で修正されます。
<P>

<H4><A NAME="4.23">4.23</A>) <i>外部</i>結合(<i>outer</i> join)はどのように実現しますか?<BR></H4>
<P>
PostgreSQL は SQL 標準構文を使う外部結合(アウタージョイン)をサポートします。ここに 2つの例題があります。

<PRE>
	SELECT *
	FROM t1 LEFT OUTER JOIN t2 ON (t1.col = t2.col);
</PRE>
あるいは
<PRE>
	SELECT *
	FROM t1 LEFT OUTER JOIN t2 USING (col);
</PRE>

これらの象徴的な問い合わせでは t1.col を t2.col と結合して、t1 の結合されなかったロウ(t2 と一致しなかったロウ)も返しています。<SMALL>RIGHT</SMALL> 結合は t2 の結合されなかったロウを加えるでしょう。<SMALL>FULL</SMALL> 結合は、一致したロウに t1 と t2 からは結合されなかったロウを返すでしょう。<SMALL>OUTER</SMALL> という言葉はオプションで <SMALL>LEFT</SMALL>, <SMALL>RIGHT</SMALL>, または <SMALL>FULL</SMALL> などの結合を仮定されています。

以前のリリースでは外部結合(outer join)を<SMALL>UNION</SMALL> と <SMALL>NOT IN</SMALL> を使ってシミュレートできます。
たとえば、<i>tab1</i> と <i>tab2</i> を結合するときは、次の問い合わせで二つのテーブルを<i>外部</i>結合します。

<PRE>
	SELECT tab1.col1, tab2.col2
	FROM tab1, tab2
	WHERE tab1.col1 = tab2.col1
	UNION ALL
	SELECT tab1.col1, NULL
	FROM tab1
	WHERE tab1.col1 NOT IN (SELECT tab2.col1 FROM tab2)
	ORDER BY col1
</PRE>

<P>
<H4><A NAME="4.24">4.24</A>)  複数のデータベースを使う問い合わせはどのようにすればできますか？<BR></H4>

<P>
現行のデータベース以外への問い合わせ方法はありません。というのもPostgreSQLがデータベース仕様のシステムカタログを読み込むためで、そこには、たとえそのふりをするだけにしろ、データベースを越えて問い合わせをするすべがありません。
<P>
<I>contrib/dblink</I> はデータベース間(cross-database)の問い合わせを関数呼出しにより許します。もちろん、クライアントは同時に接続を別のデータベースへも張らなくてはならず、結果をクライアント側でマージしなくてはなりません。</P>


<P>
<H4><A NAME="4.25">4.25</A>) 関数で複数のロウまたはカラムを返すにはどうしますか？<BR></H4>

<P>7.3では関数から、複数行のや複数カラムを簡単に返せます。
<a href="http://techdocs.postgresql.org/guides/SetReturningFunctions">http://techdocs.postgresql.org/guides/SetReturningFunctions</a>。


<P>
<H4><A name="4.26">4.26</A>)なぜ、PL/PgSQL 関数の中から一時テーブルを確実に create/drop することができないのでしょうか？</H4>
<P>
PL/PgSQL は関数の内容をキャッシュし、その不幸な副作用のため、もし PL/PgSQL 関数が一時テーブルにアクセスすると、そのテーブルはあとでドロップされ再作成されますが、関数が再び呼び出されると、キャッシュされているその関数の内容はまだ古い一時テーブルを依然として指しているからです。解決策は、 PL/PgSQL の中で <SMALL>EXECUTE</SMALL> を一時テーブルアクセスのために使うことです。これで、毎回クエリーのパースし直しを起こすでしょう。</P>


<H4><A name="4.27">4.27</A>) どのようなリプリケーションオプションを利用できますか?
</H4>
<P>
マスター／スレーブのリプリケーションオプションがいくつか利用可能です。これらのオプションではマスターのみがデータベースを変更でき、スレーブはデータベースを読むだけです。
<a href="http://gborg.PostgreSQL.org/genpage?replication_research">
http://gborg.PostgreSQL.org/genpage?replication_research</a>
の最後にそれらを一覧にしてあります。
マルチ-マスターのリプリケーションによるソリューションは
<ahref="http://gborg.PostgreSQL.org/project/pgreplication/projdisplay.php">
http://gborg.PostgreSQL.org/project/pgreplication/projdisplay.php</a>
にて作業が進められています。
</P>

[訳注
    JPUG 分散トランザクション開発分科会では、永安悟史さんを中心に２相
    コミットの実装を行なっています。
	http://www.postgresql.jp/subcommittee/dt/index.html
	http://www.snaga.org/jpug-dt/

    三谷篤さんによる双方向リプリケーションPGReplicate
	http://www.csra.co.jp/~mitani/jpug/pgreplicate/
]

<H4><A name="4.28">4.28</A>) どのような暗号化オプションを利用できますか?
</H4>
<UL>
<LI><I>contrib/pgcrypto</I>には<SMALL>SQL</SMALL>問い合わせの中で使うための沢山の暗号化を含みます。
</LI>
<LI>クライアントとサーバとの間の伝送を暗号化するには、サーバでは<I>postgresql.conf</I>の<I>ssl</I>オプションを<I>true</I> に設定し、<I>pg_hba.conf</I>には適用する<I>host</I>あるいは<I>hostssl</I>の行がなくてはなりません。そして、クライアントでは<I>sslmode</I>を<I>disable</I>にしてはなりません。
(PostgreSQL純正のSSL接続のかわりに、stunnel や ssh サードパーティ製の暗号化転送を使うことも可能であることも記しておきます。)
</LI>
<LI>バージョン7.3 ではデータベースユーザのパスワードは保存される時に自動的に暗号化されます。 それより前のバージョンでは<I>postgresql.conf</I>中で<I>PASSWORD_ENCRYPTION</I>を有効にする必要があります。 
</LI>

<LI>サーバーを走らせるのに暗号化ファイルシステムを使うこともできます。</LI>
</UL>


<P>
<HR>
<H2 align="center">PostgreSQLの拡張についての質問</H2>
<P>

<H4><A NAME="5.1">5.1</A>)	自分で書いたユーザ定義関数を psql の中で実行するとコア・ダンプしてしまうのはなぜですか？
</H4>

<P> 問題は色々と考えられますが、まず最初に、作成したユーザ定義関数を単独のテストプログラムにして試してみて下さい。


<P>
<H4><A NAME="5.2">5.2</A>)	PostgreSQL 用に書いたちょっと素敵な新しい型や関数を提供してプロジェクトに貢献したいのですが？
</H4>

<P> 皆さんの行なった拡張を、<I>pgsql-hackers</I> メーリング・リストに送ってください。そして、ゆくゆくはそうした拡張が <I>contrib/</I> サブディレクトリの中に入ることになるでしょう。

<P>
<H4><A NAME="5.3">5.3</A>)	タプルを返す C言語の関数はどのように書きますか？
</H4>

<P>バージョン7.3以降のPostgreSQLでは、テーブルを返す関数を C, PL/PgSQL、そして SQL にて完全にサポートします。詳しくはプログラマガイドの情報を見てください。Cで定義された表を返す関数の例題が<I>contrib/tablefunc</I>の中にあります。


<P><H4><A NAME="5.4">5.4</A>)	ソース・ファイルを変更しました。再コンパイルしても変化が見られないのはなぜですか？
</H4>

<P> いくつかの <I>Makefile</I> がインクルード・ファイルに対して適切な依存関係を持っていません。<I>make clean</I> をしてからもう一度 <I>make</I> を行なわなくてはなりません。もし、<SMALL>GCC</SMALL> をお使いであれば <i>configure</i> の <i>--enable-depend</i> オプションを使って、コンパイラに依存関係を自動的に調べさせることもできます。


<HR>

<SMALL><PRE>
[訳注：
  日本語版の製作については以下の通りです。

  最終更新日:	2003年09月20日
  翻訳者:	桑村 潤 (<A HREF="mailto:juk at PostgreSQL.jp">Jun Kuwamura &lt;juk at PostgreSQL.jp&gt;</A>)

  このFAQの和訳の作成にあたり協力をしてくださった方々(敬称は略させていただきます):

		田仲 稔(<A HREF="mailto:Tanaka.Minoru at keiken.co.jp">Minoru TANAKA &lt;Tanaka.Minoru at keiken.co.jp&gt;</A>)
		石井 達夫(<A HREF="mailto:t-ishii at sra.co.jp">Tatsuo ISHII &lt;t-ishii at sra.co.jp&gt;</A>)
		齊藤 知人(<A HREF="mailto:tomos at elelab.nsc.co.jp">Tomohito SAITOH &lt;tomos at elelab.nsc.co.jp&gt;</A>)
		馬場  肇(<A HREF="mailto:baba at kusastro.kyoto-u.ac.jp">Hajime BABA &lt;baba at kusastro.kyoto-u.ac.jp&gt;</A>)
		岡本 一幸(<A HREF="mailto:kokamoto at itg.hitachi.co.jp">Kazuyuki OKAMOTO &lt;kokamoto at itg.hitachi.co.jp&gt;</A>)
		小菅 昭一(<A HREF="mailto:s-kosuge at str.hitachi.co.jp">Shoichi Kosuge &lt;s-kosuge at str.hitachi.co.jp&gt;</A>)
		山下 義之(<A HREF="mailto:dica at eurus.dti.ne.jp">Yoshiyuki YAMASHITA &lt;dica at eurus.dti.ne.jp&gt;</A>)
		境 真太郎(<A HREF="mailto:s_sakai at mxn.mesh.ne.jp">Sintaro SAKAI &lt;s_sakai at mxn.mesh.ne.jp&gt;</A>)
		生越 昌己(<A HREF="mailto:ogochan at zetabits.com">Masami OGOSHI &lt;ogochan at zetabits.com&gt;</A>)
		石川 俊行(<A HREF="mailto:tosiyuki at gol.com">Toshiyuki ISHIKAWA &lt;tosiyuki at gol.com&gt;</A>)
		本田 茂広(<A HREF="mailto:fwif0083 at mb.infoweb.ne.jp">Shigehiro HONDA &lt;fwif0083 at mb.infoweb.ne.jp&gt;</A>)
		せせ じゅん(<A HREF="mailto:sesejun at linet.gr.jp">Jun SESE &lt;sesejun at linet.gr.jp&gt;</A>)
		神谷 英孝(<A HREF="mailto:hkamiya at catvmics.ne.jp">Hidetaka KAMIYA &lt;hkamiya at catvmics.ne.jp&gt;</A>)
		菅原 敦(<A HREF="mailto:asugawar at f3.dion.ne.jp">Atsushi SUGAWARA &lt;asugawar at f3.dion.ne.jp&gt;</A>)
		稲葉 香理(<A HREF="mailto:i-kaori at sra.co.jp">Kaori Inaba &lt;i-kaori at sra.co.jp&gt;</A>)

  をはじめ、ポストグレスに関する話題豊富な<A HREF="http://www.sra.co.jp/people/t-ishii/PostgreSQL/ML/info.html">日本語ポストグレス・メーリングリスト</A>、
和訳のきっかけを作ってくれた <A HREF="http://jf.linux.or.jp/">JF(Linux Japanese FAQ Mailing List)プロジェクト</A>、その他、
直接あるいは間接的にかかわっているすべてのオープンソースコミュニティーの皆さんに感謝します。

  日本語版のこの文書は、以下からもたどれます。
	<A HREF="http://www.rccm.co.jp/~juk/pgsql/">http://www.rccm.co.jp/~juk/pgsql/</A>(FAQ和訳 PostgreSQL についてよくある質問)
	<A HREF="http://www.PostgreSQL.jp/subcommittee/jpugdoc/">http://www.PostgreSQL.jp/subcommittee/jpugdoc/</A>JPUG文書・書籍関連分科会
	<A HREF="http://www.linux.or.jp/JF/">http://www.linux.or.jp/JF/</A>Linux JFプロジェクト

  なお、この和訳に関するご意見は(<A HREF="mailto:juk at PostgreSQL.jp">juk at PostgreSQL.jp</A>)までお寄せ下さい。
]
</PRE></SMALL>

</BODY>
</HTML>
