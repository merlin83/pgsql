--
--	PostgreSQL code for IP addresses.
--
--	$Id: ip.sql.in,v 1.1 1998-04-22 04:20:30 scrappy Exp $
--

load '_OBJWD_/ip_DLSUFFIX_';

--
--	Input and output functions and the type itself:
--

create function ipaddr_in(opaque)
	returns opaque
	as '_OBJWD_/ip_DLSUFFIX_'
	language 'c';

create function ipaddr_out(opaque)
	returns opaque
	as '_OBJWD_/ip_DLSUFFIX_'
	language 'c';

create type ipaddr (
	internallength = 6,
	externallength = variable,
	input = ipaddr_in,
	output = ipaddr_out
);

--
--	The various boolean tests:
--

create function ipaddr_lt(ipaddr, ipaddr)
	returns bool
	as '_OBJWD_/ip_DLSUFFIX_'
	language 'c';

create function ipaddr_le(ipaddr, ipaddr)
	returns bool
	as '_OBJWD_/ip_DLSUFFIX_'
	language 'c';

create function ipaddr_eq(ipaddr, ipaddr)
	returns bool
	as '_OBJWD_/ip_DLSUFFIX_'
	language 'c';

create function ipaddr_ge(ipaddr, ipaddr)
	returns bool
	as '_OBJWD_/ip_DLSUFFIX_'
	language 'c';

create function ipaddr_gt(ipaddr, ipaddr)
	returns bool
	as '_OBJWD_/ip_DLSUFFIX_'
	language 'c';

create function ipaddr_ne(ipaddr, ipaddr)
	returns bool
	as '_OBJWD_/ip_DLSUFFIX_'
	language 'c';

create function ipaddr_in_net(ipaddr, ipaddr)
	returns bool
	as '_OBJWD_/ip_DLSUFFIX_'
	language 'c';

create function ipaddr_mask(ipaddr)
	returns ipaddr
	as '_OBJWD_/ip_DLSUFFIX_'
	language 'c';

create function ipaddr_bcast(ipaddr)
	returns ipaddr
	as '_OBJWD_/ip_DLSUFFIX_'
	language 'c';

--
--	Now the operators.  Note how some of the parameters to some
--	of the 'create operator' commands are commented out.  This
--	is because they reference as yet undefined operators, and
--	will be implicitly defined when those are, further down.
--

create operator < (
	leftarg = ipaddr,
	rightarg = ipaddr,
--	negator = >=,
	procedure = ipaddr_lt
);

create operator <= (
	leftarg = ipaddr,
	rightarg = ipaddr,
--	negator = >,
	procedure = ipaddr_le
);

create operator = (
	leftarg = ipaddr,
	rightarg = ipaddr,
	commutator = =,
--	negator = <>,
	procedure = ipaddr_eq
);

create operator >= (
	leftarg = ipaddr,
	rightarg = ipaddr,
	negator = <,
	procedure = ipaddr_ge
);

create operator > (
	leftarg = ipaddr,
	rightarg = ipaddr,
	negator = <=,
	procedure = ipaddr_gt
);

create operator <> (
	leftarg = ipaddr,
	rightarg = ipaddr,
	negator = =,
	procedure = ipaddr_ne
);

--
--	eof
--
